@inject IHttpContextAccessor HttpContextAccessor

<!DOCTYPE html>
<html lang="en">
<head>
<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow-x: hidden; /* prevent horizontal scroll */
    }

    #wrapper {
        min-height: 100vh;
        display: flex;
        flex-wrap: nowrap;
    }

    #sidebar-wrapper {
        width: 250px; /* fixed width for sidebar */
        flex-shrink: 0; /* don’t shrink */
        height: 100vh;
        position: fixed; /* make sidebar static/fixed */
        top: 0;
        left: 0;
        overflow-y: auto; /* scroll if content overflows */
    }

    #page-content-wrapper {
        margin-left: 250px; /* push content to the right of the sidebar */
        flex-grow: 1;
        padding: 1rem;
        width: calc(100% - 250px); /* fill remaining width */
        min-height: 100vh;
        background-color: white; /* or your preferred background */
    }
</style>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - Car Rental Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body class="demo">
    <div class="d-flex" id="wrapper">
        <!-- Sidebar -->
        <div class="bg-dark border-end text-white" id="sidebar-wrapper">
            <div class="sidebar-heading p-3 fs-4 fw-bold">CarRental</div>
            <div class="list-group list-group-flush">
                @{
                    // Retrieve roles from session
                    var rolesString = HttpContextAccessor.HttpContext.Session.GetString("UserRoles");
                    var roles = rolesString?.Split(',');

                    if (roles != null && roles.Contains("Admin"))
                    {
                        <a asp-controller="Dashboard" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Dashboard</a>
                        <a asp-controller="Car" asp-action="AdminIndex" class="list-group-item list-group-item-action bg-dark text-white">Manage Cars</a>
                        <a asp-controller="Rental" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">All Rentals</a>
                        //<a asp-controller="Payment" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Payments</a>
                        <a asp-controller="SystemSetting" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">System Settings</a>
                        <a asp-controller="Auth" asp-action="Logout" class="list-group-item list-group-item-action bg-dark text-white">Logout</a>
                    }
                    else if (roles != null && roles.Contains("User"))
                    {
                        <a asp-controller="Dashboard" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Dashboard</a>
                        <a asp-controller="Car" asp-action="Index" class="list-group-item list-group-item-action bg-dark text-white">Available Cars</a>
                        <a asp-controller="Rental" asp-action="MyRentals" class="list-group-item list-group-item-action bg-dark text-white">My Rentals</a>
                        // <a asp-controller="Payment" asp-action="MyPayments" class="list-group-item list-group-item-action bg-dark text-white">My Payments</a>
                        <a asp-controller="Auth" asp-action="Logout" class="list-group-item list-group-item-action bg-dark text-white">Logout</a>
                    }
                }

            </div>
        </div>

        <!-- Page content wrapper -->
        <div id="page-content-wrapper" class="w-100 p-4">
            @RenderBody()
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>